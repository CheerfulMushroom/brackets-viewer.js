!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t(1);function r(e,n){const t=Object();for(const r of e)t[r[n]]||(t[r[n]]=[]),t[r[n]].push(r);return Object.values(t)}window.bracketsViewer=new class{constructor(){this.teamRefsDOM={}}render(e,n){const t=$(".tournament");if(0===t.length)throw Error('Root not found. You must have a root element with class ".tournament"');switch(e.type){case"double_elimination":this.renderDoubleElimination(t,e,n);break;default:throw Error("Unknown bracket type: "+e.type)}}renderDoubleElimination(e,n,t){t.participant.map(e=>this.teamRefsDOM[e.id]=[]);const o=r(t.match,"group_id");this.participants=t.participant,e.append($("<h1>").text(n.name)),this.renderWinnerBracket(e,t.round,o[0]),this.renderLoserBracket(e,t.round,o[1]),this.renderGrandFinal(o[2][0])}renderWinnerBracket(e,n,t){const o=$('<div class="winner bracket">'),a=r(t,"round_id");for(const e of a){const t=n.find(n=>n.id===e[0].round_id);if(!t)throw Error("Round not found.");const r=$('<div class="round">').append($("<h2>").text("WB Round "+t.number));for(const n of e)r.append(this.renderMatch(n,{connectPrevious:t.number>1,connectNext:!0}));o.append(r)}e.append(o)}renderLoserBracket(e,n,t){const o=$('<div class="loser bracket">'),a=r(t,"round_id");for(const e of a){const t=n.find(n=>n.id===e[0].round_id);if(!t)throw Error("Round not found.");const r=$('<div class="round">').append($("<h2>").text("LB Round "+t.number));for(const n of e)r.append(this.renderMatch(n,{connectPrevious:t.number>1,connectNext:t.number<a.length}));o.append(r)}e.append(o)}renderGrandFinal(e){const n=this.renderMatch(e,{connectPrevious:!0,connectNext:!1}),t=$('<div class="round">').append($("<h2>").text("Grand Final"));t.append(n),$(".winner.bracket").append(t)}renderMatch(e,n){const t=this.renderTeam(e.opponent1),r=this.renderTeam(e.opponent2),o=$('<div class="teams">').append(t).append(r),a=$('<div class="match">').append(o);return n&&n.connectPrevious&&o.addClass("connect-previous"),n&&n.connectNext&&a.addClass("connect-next"),a}renderTeam(e){const n=$('<div class="team">'),t=$('<div class="name">'),r=$('<div class="score">');if(null===e)t.text("BYE");else{const n=this.participants.find(n=>n.id===e.id);t.text(void 0===n?"TBD":n.name),r.text(e.score||""),e.result&&"win"===e.result&&(t.addClass("win"),r.addClass("win"))}if(n.append(t).append(r),e&&null!==e.id){const t=e.id;this.teamRefsDOM[t].push(n.get(0)),n.hover(()=>$(this.teamRefsDOM[t]).addClass("hover"),()=>$(this.teamRefsDOM[t]).removeClass("hover"))}return n}}},function(e,n,t){}]);