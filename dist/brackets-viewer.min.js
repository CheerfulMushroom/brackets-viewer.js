!function(e){var n={};function t(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)t.d(r,s,function(n){return e[n]}.bind(null,s));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t(1);function r(e,n){const t=Object();for(const r of e)t[r[n]]||(t[r[n]]=[]),t[r[n]].push(r);return Object.values(t)}window.bracketsViewer=new class{constructor(){this.teamRefsDOM={}}render(e){const n=$(".tournament");if(0===n.length)throw Error('Root not found. You must have a root element with class ".tournament"');switch(e.stage.type){case"single_elimination":case"double_elimination":this.renderElimination(n,e);break;default:throw Error("Unknown bracket type: "+e.stage.type)}}renderElimination(e,n){n.participants.map(e=>this.teamRefsDOM[e.id]=[]);const t=r(n.matches,"group_id");if(this.participants=n.participants,e.append($("<h1>").text(n.stage.name)),"single_elimination"===n.stage.type){const s=!!t[1];this.renderGroup(e,n.rounds,r(t[0],"round_id"),e=>"Round "+e.number),s&&this.renderFinal("consolation_final",t[1])}else if("double_elimination"===n.stage.type){const s=!!t[2];this.renderGroup(e,n.rounds,r(t[0],"round_id"),e=>"WB Round "+e.number,!1,s),this.renderGroup(e,n.rounds,r(t[1],"round_id"),e=>"LB Round "+e.number,!0),s&&this.renderFinal("grand_final",t[2])}}renderGroup(e,n,t,r,s,o){const a=$('<div class="bracket">');for(const e of t){const i=n.find(n=>n.id===e[0].round_id);if(!i)throw Error("Round not found.");const d=$('<div class="round">').append($("<h2>").text(r(i)));for(const n of e){let e;e=s?{connectPrevious:i.number>1&&(i.number%2==1?"square":"straight"),connectNext:i.number<t.length&&(i.number%2==0?"square":"straight")}:{connectPrevious:i.number>1&&"square",connectNext:i.number<t.length?"square":!!o&&"straight"},d.append(this.renderMatch(n,e))}a.append(d)}e.append(a)}renderFinal(e,n){const t=$(".bracket").eq(0),r=1===n.length?()=>"Grand Final":e=>"Grand Final R"+(e+1);for(let s=0;s<n.length;s++){const o=this.renderMatch(n[s],{connectPrevious:"grand_final"===e&&0===s&&"straight",connectNext:2===n.length&&0===s&&"straight"}),a=$('<div class="round">').append($("<h2>").text("grand_final"===e?r(s):"Consolation Final"));a.append(o),t.append(a)}}renderMatch(e,n){const t=this.renderTeam(e.opponent1),r=this.renderTeam(e.opponent2),s=$('<div class="teams">').append(t).append(r),o=$('<div class="match">').append(s);return n?(n.connectPrevious&&s.addClass("connect-previous"),n.connectNext&&o.addClass("connect-next"),"straight"===n.connectPrevious&&s.addClass("straight"),"straight"===n.connectNext&&o.addClass("straight"),o):o}renderTeam(e){const n=$('<div class="team">'),t=$('<div class="name">'),r=$('<div class="score">');if(null===e)t.text("BYE");else{const n=this.participants.find(n=>n.id===e.id);t.text(void 0===n?"TBD":n.name),r.text(e.score||""),e.result&&"win"===e.result&&(t.addClass("win"),r.addClass("win")),e.result&&"loss"===e.result&&(t.addClass("loss"),r.addClass("loss"))}if(n.append(t).append(r),e&&null!==e.id){const t=e.id;this.teamRefsDOM[t].push(n.get(0)),n.hover(()=>$(this.teamRefsDOM[t]).addClass("hover"),()=>$(this.teamRefsDOM[t]).removeClass("hover"))}return n}}},function(e,n,t){}]);